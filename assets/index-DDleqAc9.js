var Ee=(t,s)=>()=>(s||t((s={exports:{}}).exports,s),s.exports);var Be=Ee((he,j)=>{(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const d of document.querySelectorAll('link[rel="modulepreload"]'))m(d);new MutationObserver(d=>{for(const g of d)if(g.type==="childList")for(const L of g.addedNodes)L.tagName==="LINK"&&L.rel==="modulepreload"&&m(L)}).observe(document,{childList:!0,subtree:!0});function f(d){const g={};return d.integrity&&(g.integrity=d.integrity),d.referrerPolicy&&(g.referrerPolicy=d.referrerPolicy),d.crossOrigin==="use-credentials"?g.credentials="include":d.crossOrigin==="anonymous"?g.credentials="omit":g.credentials="same-origin",g}function m(d){if(d.ep)return;d.ep=!0;const g=f(d);fetch(d.href,g)}})();function A(t,s){const f=Math.ceil(Math.min(Math.abs(t),Math.abs(s))),m=Math.floor(Math.max(Math.abs(t),Math.abs(s))),d=Math.random()*(m-f+1)+f;return Math.floor(d)}const X=25,Y=new Set,ee=new Set,z=(t,s)=>{for(;t.size!==s;)t.add(A(1,s));return t};z(Y,X);z(ee,X);const Le=Array.from(ee),_e=["описание-1","описание-2","описание-3","описание-4","описание-5","описание-6","описание-7","описание-8","описание-9","описание-10"],qe=["Всё отлично!","В целом всё неплохо. Но не всё.","Когда вы делаете фотографию, хорошо бы убирать палец из кадра. В конце концов это просто непрофессионально.","Моя бабушка случайно чихнула с фотоаппаратом в руках и у неё получилась фотография лучше.","Я поскользнулся на банановой кожуре и уронил фотоаппарат на кота и у меня получилась фотография лучше.","Лица у людей на фотке перекошены, как будто их избивают. Как можно было поймать такой неудачный момент?!"],Se=["Артем","Сергей","Денис","Вера","Артур","Инна","Вероника","Александр","Ирина"],be=["Иванов","Петров","Сидоров","Липин","Мартынова","Дони","Гафетдинов"],O=t=>t[A(0,t.length-1)],xe=t=>Array.from(z(Y,200))[t],Ce=()=>({id:xe(A(0,200)),avatar:`img/avatar-${A(1,6)}.svg`,message:`${O(qe)}`,name:`${O(Se)} ${O(be)}`}),Ae=()=>Array.from({length:A(5,30)},Ce),N=document.querySelector(".effect-level"),k=N.querySelector(".effect-level__slider"),D=N.querySelector(".effect-level__value"),we=document.querySelectorAll(".effects__radio"),w=document.querySelector(".img-upload__preview img"),Te=document.querySelector(".scale__control--bigger"),$e=document.querySelector(".scale__control--smaller"),B=document.querySelector(".scale__control--value");let q=100;const ke=()=>{B.value=`${q}%`,w.style.tranform=""};Te.addEventListener("click",()=>{q<100&&(q+=25,B.value=`${q}%`,w.style.transform=`scale(${q/100})`)});$e.addEventListener("click",()=>{q>25&&(q-=25,B.value=`${q}%`,w.style.transform=`scale(${q/100})`)});const G={chrome:{filter:"grayscale",unit:"",options:{range:{min:0,max:1},start:1,step:.1}},sepia:{filter:"sepia",unit:"",options:{range:{min:0,max:1},start:1,step:.1}},marvin:{filter:"invert",unit:"%",options:{range:{min:0,max:100},start:100,step:1}},phobos:{filter:"blur",unit:"px",options:{range:{min:0,max:3},start:3,step:.1}},heat:{filter:"brightness",unit:"",options:{range:{min:1,max:3},start:3,step:.1}}};noUiSlider.create(k,{range:{min:0,max:1},start:1,step:.1,connect:"lower"});const te=()=>{D.value="",N.classList.add("hidden"),k.setAttribute("disabled",!0),w.style.filter=""};we.forEach(t=>{t.addEventListener("click",()=>{if(w.className="",t.value==="none"){te();return}N.classList.remove("hidden"),k.removeAttribute("disabled",!0),w.classList.add(`effects__preview--${t.value}`),k.noUiSlider.updateOptions(G[t.value].options),k.noUiSlider.on("update",s=>{D.value=s;const{filter:f,unit:m}=G[t.value];w.style.filter=`${f}(${D.value}${m})`})})});(function(t,s){typeof he=="object"&&typeof j<"u"?j.exports=s():typeof define=="function"&&define.amd?define(s):(t=typeof globalThis<"u"?globalThis:t||self).Pristine=s()})(void 0,function(){var t={en:{required:"This field is required",email:"This field requires a valid e-mail address",number:"This field requires a number",integer:"This field requires an integer value",url:"This field requires a valid website URL",tel:"This field requires a valid telephone number",maxlength:"This fields length must be < ${1}",minlength:"This fields length must be > ${1}",min:"Minimum value for this field is ${1}",max:"Maximum value for this field is ${1}",pattern:"Please match the requested format",equals:"The two fields do not match"}};function s(n){var l=arguments;return this.replace(/\${([^{}]*)}/g,function(p,r){return l[r]})}function f(n){return n.pristine.self.form.querySelectorAll('input[name="'+n.getAttribute("name")+'"]:checked').length}var m={classTo:"form-group",errorClass:"has-danger",successClass:"has-success",errorTextParent:"form-group",errorTextTag:"div",errorTextClass:"text-help"},d=["required","min","max","minlength","maxlength","pattern"],g=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,L=/-message(?:-([a-z]{2}(?:_[A-Z]{2})?))?/,v="en",M={},h=function(n,l){l.name=n,l.priority===void 0&&(l.priority=1),M[n]=l};function E(n,l,p){var r=this;function b(e,a,u,i){var o=M[u];if(o&&(e.push(o),i)){var c=u==="pattern"?[i]:i.split(",");c.unshift(null),a[u]=c}}function ye(e){for(var a=[],u=!0,i=0;e.validators[i];i++){var o=e.validators[i],c=e.params[o.name]?e.params[o.name]:[];if(c[0]=e.input.value,!o.fn.apply(e.input,c)&&(u=!1,typeof o.msg=="function"?a.push(o.msg(e.input.value,c)):typeof o.msg=="string"?a.push(s.apply(o.msg,c)):o.msg===Object(o.msg)&&o.msg[v]?a.push(s.apply(o.msg[v],c)):e.messages[v]&&e.messages[v][o.name]?a.push(s.apply(e.messages[v][o.name],c)):t[v]&&t[v][o.name]&&a.push(s.apply(t[v][o.name],c)),o.halt===!0))break}return e.errors=a,u}function K(e){if(e.errorElements)return e.errorElements;var a=function(o,c){for(;(o=o.parentElement)&&!o.classList.contains(c););return o}(e.input,r.config.classTo),u=null,i=null;return(u=r.config.classTo===r.config.errorTextParent?a:a.querySelector("."+r.config.errorTextParent))&&((i=u.querySelector(".pristine-error"))||((i=document.createElement(r.config.errorTextTag)).className="pristine-error "+r.config.errorTextClass,u.appendChild(i),i.pristineDisplay=i.style.display)),e.errorElements=[a,i]}function Z(e){var a=K(e),u=a[0],i=a[1];u&&(u.classList.remove(r.config.successClass),u.classList.add(r.config.errorClass)),i&&(i.innerHTML=e.errors.join("<br/>"),i.style.display=i.pristineDisplay||"")}function ve(e){var a=function(u){var i=K(u),o=i[0],c=i[1];return o&&(o.classList.remove(r.config.errorClass),o.classList.remove(r.config.successClass)),c&&(c.innerHTML="",c.style.display="none"),i}(e)[0];a&&a.classList.add(r.config.successClass)}return function(e,a,u){e.setAttribute("novalidate","true"),r.form=e,r.config=function(i,o){for(var c in o)c in i||(i[c]=o[c]);return i}(a||{},m),r.live=u!==!1,r.fields=Array.from(e.querySelectorAll("input:not([type^=hidden]):not([type^=submit]), select, textarea")).map((function(i){var o=[],c={},x={};return[].forEach.call(i.attributes,function(y){if(/^data-pristine-/.test(y.name)){var C=y.name.substr(14),P=C.match(L);if(P!==null){var I=P[1]===void 0?"en":P[1];return x.hasOwnProperty(I)||(x[I]={}),void(x[I][C.slice(0,C.length-P[0].length)]=y.value)}C==="type"&&(C=y.value),b(o,c,C,y.value)}else~d.indexOf(y.name)?b(o,c,y.name,y.value):y.name==="type"&&b(o,c,y.value)}),o.sort(function(y,C){return C.priority-y.priority}),r.live&&i.addEventListener(~["radio","checkbox"].indexOf(i.getAttribute("type"))?"change":"input",(function(y){r.validate(y.target)}).bind(r)),i.pristine={input:i,validators:o,params:c,messages:x,self:r}}).bind(r))}(n,l,p),r.validate=function(e,a){a=e&&a===!0||e===!0;var u=r.fields;e!==!0&&e!==!1&&(e instanceof HTMLElement?u=[e.pristine]:(e instanceof NodeList||e instanceof(window.$||Array)||e instanceof Array)&&(u=Array.from(e).map(function(x){return x.pristine})));for(var i=!0,o=0;u[o];o++){var c=u[o];ye(c)?!a&&ve(c):(i=!1,!a&&Z(c))}return i},r.getErrors=function(e){if(!e){for(var a=[],u=0;u<r.fields.length;u++){var i=r.fields[u];i.errors.length&&a.push({input:i.input,errors:i.errors})}return a}return e.tagName&&e.tagName.toLowerCase()==="select"?e.pristine.errors:e.length?e[0].pristine.errors:e.pristine.errors},r.addValidator=function(e,a,u,i,o){e instanceof HTMLElement?(e.pristine.validators.push({fn:a,msg:u,priority:i,halt:o}),e.pristine.validators.sort(function(c,x){return x.priority-c.priority})):console.warn("The parameter elem must be a dom element")},r.addError=function(e,a){(e=e.length?e[0]:e).pristine.errors.push(a),Z(e.pristine)},r.reset=function(){for(var e=0;r.fields[e];e++)r.fields[e].errorElements=null;Array.from(r.form.querySelectorAll(".pristine-error")).map(function(a){a.parentNode.removeChild(a)}),Array.from(r.form.querySelectorAll("."+r.config.classTo)).map(function(a){a.classList.remove(r.config.successClass),a.classList.remove(r.config.errorClass)})},r.destroy=function(){r.reset(),r.fields.forEach(function(e){delete e.input.pristine}),r.fields=[]},r.setGlobalConfig=function(e){m=e},r}return h("text",{fn:function(n){return!0},priority:0}),h("required",{fn:function(n){return this.type==="radio"||this.type==="checkbox"?f(this):n!==void 0&&n!==""},priority:99,halt:!0}),h("email",{fn:function(n){return!n||g.test(n)}}),h("number",{fn:function(n){return!n||!isNaN(parseFloat(n))},priority:2}),h("integer",{fn:function(n){return!n||/^\d+$/.test(n)}}),h("minlength",{fn:function(n,l){return!n||n.length>=parseInt(l)}}),h("maxlength",{fn:function(n,l){return!n||n.length<=parseInt(l)}}),h("min",{fn:function(n,l){return!n||(this.type==="checkbox"?f(this)>=parseInt(l):parseFloat(n)>=parseFloat(l))}}),h("max",{fn:function(n,l){return!n||(this.type==="checkbox"?f(this)<=parseInt(l):parseFloat(n)<=parseFloat(l))}}),h("pattern",{fn:function(n,l){var p=l.match(new RegExp("^/(.*?)/([gimy]*)$"));return!n||new RegExp(p[1],p[2]).test(n)}}),h("equals",{fn:function(n,l){var p=document.querySelector(l);return p&&(!n&&!p.value||p.value===n)}}),E.addValidator=function(n,l,p,r,b){h(n,{fn:l,msg:p,priority:r,halt:b})},E.addMessages=function(n,l){var p=t.hasOwnProperty(n)?t[n]:t[n]={};Object.keys(l).forEach(function(r,b){p[r]=l[r]})},E.setLocale=function(n){v=n},E});const U=document.querySelector(".img-upload__overlay"),Me=U.querySelector(".img-upload__cancel"),re=document.querySelector(".img-upload__input"),$=document.querySelector(".img-upload__form"),T=$.querySelector(".text__hashtags"),Pe=$.querySelector(".text__description"),Ne=U.querySelector(".img-upload__preview img"),Ue=()=>{const t=re.files[0];/jpg|jpeg|png$/i.test(t.name)&&(Ne.src=URL.createObjectURL(t))};let S=new Pristine($,{classTo:"img-upload__field-wrapper",errorTextParent:"img-upload__field-wrapper"});const ne="Хештег не валиден",se="Хештег должен быть не больше 5",oe="Хештег не должен повторяться",ie=t=>{const s=t.trim().toLowerCase().split(/\s+/),f=/^#[A-Za-zА-Яа-яЁё0-9]{1,19}$/;return s.every(m=>f.test(m))};S.addValidator(T,ie,ne);const ae=t=>t.trim().toLowerCase().split(/\s+/).length<=5;S.addValidator(T,ae,se);const ce=t=>{const s=t.trim().toLowerCase().split(/\s+/);return new Set(s).size===s.length};S.addValidator(T,ce,oe);const le=t=>t.key==="Escape";function ue(t){le(t)&&t.stopPropagation()}T.addEventListener("keydown",ue);Pe.addEventListener("keydown",ue);const de=()=>{S.destroy(),U.classList.add("hidden"),document.body.classList.remove("modal-open"),document.removeEventListener("keydown",me),$.reset()};function me(t){le(t)&&(t.preventDefault(),de())}const Ie=()=>{S=new Pristine($,{classTo:"img-upload__field-wrapper",errorTextParent:"img-upload__field-wrapper"}),S.addValidator(T,ie,ne),S.addValidator(T,ae,se),S.addValidator(T,ce,oe),U.classList.remove("hidden"),document.body.classList.add("modal-open"),Me.addEventListener("click",de,{onece:!0}),document.addEventListener("keydown",me),Ue(),te(),ke()};re.addEventListener("change",Ie);$.addEventListener("submit",t=>{t.preventDefault(),S.validate()&&$.submit()});const fe=document.body,Oe=document.querySelector("#picture").content.querySelector(".picture"),He=document.querySelector(".pictures"),_=document.querySelector(".big-picture"),Ve=_.querySelector(".big-picture__img").querySelector("img"),H=_.querySelector(".likes-count"),J=_.querySelector(".social__comment-count"),Fe=_.querySelector(".social__caption"),Q=_.querySelector(".big-picture__cancel"),R=_.querySelector(".social__comments"),De=R.querySelector(".social__comment"),V=_.querySelector(".comments-loader"),F=_.querySelector(".social__footer-text"),W=_.querySelector(".social__footer-btn"),Re=t=>t.key==="Escape",pe=()=>{_.classList.add("hidden"),fe.classList.remove("modal-open"),document.removeEventListener("keydown",ge)};function ge(t){Re(t)&&(t.preventDefault(),pe())}const je=({src:t,comments:s,likes:f})=>{_.classList.remove("hidden"),fe.classList.add("modal-open"),Ve.src=t,Fe.textContent=_e[A(0,9)];const m=f,d=E=>{E.target.classList.toggle("likes-count--active"),E.target.classList.contains("likes-count--active")?E.target.textContent=m+1:E.target.textContent=m};H.addEventListener("click",d),H.textContent=m;let g=5,L;const v=()=>{L=g,R.innerHTML="",s.slice(0,L).forEach(({avatar:E,name:n,message:l})=>{const p=De.cloneNode(!0),r=p.querySelector("img"),b=p.querySelector("p");r.src=E,r.alt=n,b.textContent=l,R.append(p)}),L>=s.length?(V.classList.add("hidden"),J.textContent=`${s.length} из ${s.length} комментариев`):(V.classList.remove("hidden"),J.textContent=`${L} из ${s.length} комментариев`)},M=()=>{L=g+=5,v()},h=()=>{if(F.value!==""){const E={id:A(0,200),avatar:"img/avatar-6.svg",message:F.value,name};s.unshift(E),v(),F.value=""}};v(),V.addEventListener("click",M),W.addEventListener("click",h),Q.addEventListener("click",pe),document.addEventListener("keydown",ge),Q.addEventListener("click",()=>{W.removeEventListener("click",h),H.removeEventListener("click",d)},{once:!0})},ze=()=>{Le.forEach(t=>{const s=Ae(),f={src:`photos/${t}.jpg`,likes:A(50,200),comments:s},m=Oe.cloneNode(!0);m.querySelector(".picture__img").src=f.src,m.querySelector(".picture__comments").textContent=f.comments.length,m.querySelector(".picture__likes").textContent=f.likes,m.addEventListener("click",()=>je(f)),He.append(m)})};ze()});export default Be();
