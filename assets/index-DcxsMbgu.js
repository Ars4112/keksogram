(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function r(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(o){if(o.ep)return;o.ep=!0;const s=r(o);fetch(o.href,s)}})();function u(e,t){const r=Math.ceil(Math.min(Math.abs(e),Math.abs(t))),n=Math.floor(Math.max(Math.abs(e),Math.abs(t))),o=Math.random()*(n-r+1)+r;return Math.floor(o)}const T=25,V=new Set,I=new Set,b=(e,t)=>{for(;e.size!==t;)e.add(u(1,t));return e};b(V,T);b(I,T);const oe=Array.from(I),ne=["описание-1","описание-2","описание-3","описание-4","описание-5","описание-6","описание-7","описание-8","описание-9","описание-10"],re=["Всё отлично!","В целом всё неплохо. Но не всё.","Когда вы делаете фотографию, хорошо бы убирать палец из кадра. В конце концов это просто непрофессионально.","Моя бабушка случайно чихнула с фотоаппаратом в руках и у неё получилась фотография лучше.","Я поскользнулся на банановой кожуре и уронил фотоаппарат на кота и у меня получилась фотография лучше.","Лица у людей на фотке перекошены, как будто их избивают. Как можно было поймать такой неудачный момент?!"],se=["Артем","Сергей","Денис","Вера","Артур","Инна","Вероника","Александр","Ирина"],ce=["Иванов","Петров","Сидоров","Липин","Мартынова","Дони","Гафетдинов"],E=e=>e[u(0,e.length-1)],ie=e=>Array.from(b(V,200))[e],ae=()=>({id:ie(u(0,200)),avatar:`img/avatar-${u(1,6)}.svg`,message:`${E(re)}`,name:`${E(se)} ${E(ce)}`}),le=()=>Array.from({length:u(5,30)},ae),y=document.querySelector(".effect-level"),g=y.querySelector(".effect-level__slider"),w=y.querySelector(".effect-level__value"),de=document.querySelectorAll(".effects__radio"),m=document.querySelector(".img-upload__preview img"),ue=document.querySelector(".scale__control--bigger"),me=document.querySelector(".scale__control--smaller"),A=document.querySelector(".scale__control--value");let a=100;const pe=()=>{A.value=`${a}%`,m.style.tranform=""};ue.addEventListener("click",()=>{a<100&&(a+=25,A.value=`${a}%`,m.style.transform=`scale(${a/100})`)});me.addEventListener("click",()=>{a>25&&(a-=25,A.value=`${a}%`,m.style.transform=`scale(${a/100})`)});const $={chrome:{filter:"grayscale",unit:"",options:{range:{min:0,max:1},start:1,step:.1}},sepia:{filter:"sepia",unit:"",options:{range:{min:0,max:1},start:1,step:.1}},marvin:{filter:"invert",unit:"%",options:{range:{min:0,max:100},start:100,step:1}},phobos:{filter:"blur",unit:"px",options:{range:{min:0,max:3},start:3,step:.1}},heat:{filter:"brightness",unit:"",options:{range:{min:1,max:3},start:3,step:.1}}};noUiSlider.create(g,{range:{min:0,max:1},start:1,step:.1,connect:"lower"});const H=()=>{w.value="",y.classList.add("hidden"),g.setAttribute("disabled",!0),m.style.filter=""};de.forEach(e=>{e.addEventListener("click",()=>{if(m.className="",e.value==="none"){H();return}y.classList.remove("hidden"),g.removeAttribute("disabled",!0),m.classList.add(`effects__preview--${e.value}`),g.noUiSlider.updateOptions($[e.value].options),g.noUiSlider.on("update",t=>{w.value=t;const{filter:r,unit:n}=$[e.value];m.style.filter=`${r}(${w.value}${n})`})})});const v=document.querySelector(".img-upload__overlay"),fe=v.querySelector(".img-upload__cancel"),N=document.querySelector(".img-upload__input"),f=document.querySelector(".img-upload__form"),p=f.querySelector(".text__hashtags"),ge=f.querySelector(".text__description"),ye=v.querySelector(".img-upload__preview img"),ve=()=>{const e=N.files[0];/jpg|jpeg|png$/i.test(e.name)&&(ye.src=URL.createObjectURL(e))};let l=new Pristine(f,{classTo:"img-upload__field-wrapper",errorTextParent:"img-upload__field-wrapper"});const O="Хештег не валиден",D="Хештег должен быть не больше 5",B="Хештег не должен повторяться",R=e=>{const t=e.trim().toLowerCase().split(/\s+/),r=/^#[A-Za-zА-Яа-яЁё0-9]{1,19}$/;return t.every(n=>r.test(n))};l.addValidator(p,R,O);const F=e=>e.trim().toLowerCase().split(/\s+/).length<=5;l.addValidator(p,F,D);const K=e=>{const t=e.trim().toLowerCase().split(/\s+/);return new Set(t).size===t.length};l.addValidator(p,K,B);const j=e=>e.key==="Escape";function z(e){j(e)&&e.stopPropagation()}p.addEventListener("keydown",z);ge.addEventListener("keydown",z);const G=()=>{l.destroy(),v.classList.add("hidden"),document.body.classList.remove("modal-open"),document.removeEventListener("keydown",Z),f.reset()};function Z(e){j(e)&&(e.preventDefault(),G())}const he=()=>{l=new Pristine(f,{classTo:"img-upload__field-wrapper",errorTextParent:"img-upload__field-wrapper"}),l.addValidator(p,R,O),l.addValidator(p,F,D),l.addValidator(p,K,B),v.classList.remove("hidden"),document.body.classList.add("modal-open"),fe.addEventListener("click",G,{onece:!0}),document.addEventListener("keydown",Z),ve(),H(),pe()};N.addEventListener("change",he);f.addEventListener("submit",e=>{e.preventDefault(),l.validate()&&f.submit()});const J=document.body,_e=document.querySelector("#picture").content.querySelector(".picture"),Ee=document.querySelector(".pictures"),c=document.querySelector(".big-picture"),Se=c.querySelector(".big-picture__img").querySelector("img"),S=c.querySelector(".likes-count"),M=c.querySelector(".social__comment-count"),Le=c.querySelector(".social__caption"),P=c.querySelector(".big-picture__cancel"),C=c.querySelector(".social__comments"),qe=C.querySelector(".social__comment"),L=c.querySelector(".comments-loader"),q=c.querySelector(".social__footer-text"),U=c.querySelector(".social__footer-btn"),we=e=>e.key==="Escape",Q=()=>{c.classList.add("hidden"),J.classList.remove("modal-open"),document.removeEventListener("keydown",W)};function W(e){we(e)&&(e.preventDefault(),Q())}const Ce=({src:e,comments:t,likes:r})=>{c.classList.remove("hidden"),J.classList.add("modal-open"),Se.src=e,Le.textContent=ne[u(0,9)];const n=r,o=d=>{d.target.classList.toggle("likes-count--active"),d.target.classList.contains("likes-count--active")?d.target.textContent=n+1:d.target.textContent=n};S.addEventListener("click",o),S.textContent=n;let s=5,i;const h=()=>{i=s,C.innerHTML="",t.slice(0,i).forEach(({avatar:d,name:Y,message:ee})=>{const _=qe.cloneNode(!0),x=_.querySelector("img"),te=_.querySelector("p");x.src=d,x.alt=Y,te.textContent=ee,C.append(_)}),i>=t.length?(L.classList.add("hidden"),M.textContent=`${t.length} из ${t.length} комментариев`):(L.classList.remove("hidden"),M.textContent=`${i} из ${t.length} комментариев`)},X=()=>{i=s+=5,h()},k=()=>{if(q.value!==""){const d={id:u(0,200),avatar:"img/avatar-6.svg",message:q.value,name};t.unshift(d),h(),q.value=""}};h(),L.addEventListener("click",X),U.addEventListener("click",k),P.addEventListener("click",Q),document.addEventListener("keydown",W),P.addEventListener("click",()=>{U.removeEventListener("click",k),S.removeEventListener("click",o)},{once:!0})},be=()=>{oe.forEach(e=>{const t=le(),r={src:`photos/${e}.jpg`,likes:u(50,200),comments:t},n=_e.cloneNode(!0);n.querySelector(".picture__img").src=r.src,n.querySelector(".picture__comments").textContent=r.comments.length,n.querySelector(".picture__likes").textContent=r.likes,n.addEventListener("click",()=>Ce(r)),Ee.append(n)})};be();
